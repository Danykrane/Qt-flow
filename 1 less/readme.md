# Qt 5.10

**Иерархия классов QT**

При множественном наследовании наследуем в первую очередь от `QObject` **-** базового класса**.**

```cpp
class MyClass: public QObject, public Another{
// ...
};
```

Разработка интерфейса в C++ не было первоначальной задачей, однако `Х Win-dow System` попробовал это реализовать за счет `callback` функций.

**Минусы такого подхода**: нет проверки на типы возвращаемых значений тк используем указатель на ф-ии типа `void`

**Макрос** `Q_OBJECT` (Meta Object Compiler) следует сразу нс след линии за именем класса

```cpp
class className{
	Q_OBJECT // ";" не ставится
};
```

Данный макрос используется в классах QT для **связывания сигналов и
слотов**. Если в классе не используется сигнала — слотовая система то
данный параметр можно не использовать.

**Цель** данного макроса указать компилятору метаобъектов
который создает moc файлы что в данном классе присутвуют сигналы/слоты и они
должны быть связанны с другими сигналами/слотами через метод **connect**. Если указать данный макрос где не используется сигнально-слотовая система то данный макрос будет игнорирован.

**MOC** файлы переписываются при компиляции автоматически в случаи внесении каких либо изменений.

**Отправить** сигнал отреагировать слотом.

**Сигналы и слоты** могут объединять объекты даже в **разных потоках**.

### Сигналы

Пример сигнала: звонок будильника, жест регулироващика, костер индейцев.

**Сигнал Qt:** методы для пересылки сообщений. Причина появления: изменение состояния управляющего объекта (движение ползунка).

**Сигналы** - прототипы методов. (void) За их реализацию отвечает MOC. (макрос Q_OBJECT)

Для сигналов нужно прописать ключевое слово **signals**, чтобы программа поняла, где находится область слотов

```cpp
class MySign: public QObject{
    Q_OBJECT
public:
    MySign();
signals: //область сигналов
    void sendString(const QString&); // сигнал с параметром
    void doIt();
};
```

**Вызов сигнала:** `**emit nameOfSign()**`

## Слоты

**Слоты:** методы, которые присоединяются к сигналам. Различие между методами: прием сигналов.

Чтобы слот мог соединяться **только с сигналами сторонних объектов**, но не **вызываться как обычный метод со стороны**, этот слот необходимо объявить как **protected или private**. **Во всех других** случаях объявляйте их как **public**.

В объявлениях перед каждой группой слотов должно стоят соответственно: private slots:, protected slots: или pubic slots: **Слоты** могут быть и **виртуальными**. (в 10 раз дольше, поэтому не желательно)

**Особенности слотов:**

- нельзя параметры по умолчанию `public slots: void SlotMeth(int n = 8)`
- не должны быть static

```cpp
sender()->objectName(); //узнать от какого объекта вызван слот
```

```cpp
class MySign: public QObject{
    Q_OBJECT
public:
    MySign();

public slots: //публичные слоты
    void slot() {
        qDebug() << "I am slot";
        qDebug() << sender()->objectName(); //узнать от какого объекта вызван слот
    }

    void sendSign(){
        emit sendString("Info"); //вызов сигнала
    }

signals:
    void sendString(const QString&); // сигнал с параметром
    void doIt();
};



```
